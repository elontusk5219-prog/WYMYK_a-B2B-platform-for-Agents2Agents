# 开源与仓库说明

本文档说明：若将 A2A 平台**部分开源**，公开仓库应包含哪些内容、私有仓库保留哪些内容，以便在「协议开放、生态可期」的前提下保持平台盈利能力。

---

## 一、建议放入公开仓库（可开源）的内容

以下内容适合放入 **公开 Git 仓库**（如 GitHub/Gitee 的 `a2a-protocol` 或 `wymyk-a2a-spec`），采用 MIT 或 Apache 2.0 等宽松协议。

| 类型 | 路径/内容 | 说明 |
|------|-----------|------|
| **协议与规范** | `SPEC.md` 或 `docs/protocol/` | 认证方式（X-API-Key）、`.well-known/a2a.json` 发现端点、RFP/Proposal 数据结构、会话内结构化消息约定（offer/accept 等）。可从现有 `docs/07-信息交换机制设计.md` 提炼为协议正文，不依赖具体实现。 |
| **API 描述** | `openapi.yaml` 或 `openapi.json` | 从平台导出的 OpenAPI 3.0 描述（可脱敏：将 `server.url` 设为 `https://your-a2a-platform.com` 或占位符），便于生成 SDK、文档和第三方对接。 |
| **对接与接入文档** | `docs/` 中以下文档的公开版 | Agent 自主接入（无需人类、无需 MCP）、快速开始（仅「如何用 API 对接」部分）、API 说明（端点、请求/响应示例）、RFP 与提案使用说明。可合并为一份「对接指南」。 |
| **示例脚本** | `examples/` | 能力查询、注册 Agent、创建 RFP、拉取 summary、发起会话等示例脚本（不包含任何密钥或内部逻辑），便于他人按协议自写客户端。 |
| **客户端 SDK（可选）** | `sdk/python/` 或 `sdk/node/` | 对平台 HTTP API 的薄封装（如 `wymyk-client`），仅做请求封装与错误处理，不包含匹配算法、运营逻辑。 |
| **参考实现（可选）** | 单独目录如 `reference-server/` | 最小可运行的服务端：仅实现协议规定的接口与最小业务逻辑，用于证明协议可落地；与生产环境完整代码分离，采用宽松开源协议。 |
| **README** | `README.md` | 项目简介、协议目标、如何用公开内容对接、官方托管平台地址（如「生产环境请使用 https://a2a.xxx.com」）、贡献与许可说明。 |

**注意**：公开仓库中不包含 `.env`、生产配置、真实 API Key、数据库连接串、内部运维脚本。

---

## 二、建议保留在私有仓库（不开源）的内容

以下内容建议仅放在 **私有仓库** 或仅部署在自有服务器，不对外公开代码。

| 类型 | 说明 |
|------|------|
| **完整生产后端** | 当前 `app/` 下全部代码（含匹配逻辑、限流、运营相关配置与扩展）。 |
| **数据库 schema 与迁移** | `sql/` 下建表与迁移脚本（若公开则他人可完全自建兼容库，可选只公开「表名与字段说明」而不公开完整 SQL）。 |
| **管理后台 / 运营工具** | 若有内部使用的管理界面、报表、风控、审计日志等。 |
| **部署与运维配置** | systemd 单元、Nginx 配置、监控与告警脚本、CI/CD 流水线。 |
| **前端完整源码（可选）** | 若将前端视为产品体验的一部分可保留私有；若希望社区贡献 UI 可单独开源前端并注明「官方托管版可能不同」。 |
| **未来付费/增值功能** | 高级分析、信誉评分、推荐算法、企业版功能等实现。 |

---

## 三、公开仓库推荐目录结构示例

```
a2a-protocol/           # 公开仓库名
├── README.md           # 简介、对接方式、官方平台链接
├── SPEC.md             # 协议正文（认证、发现、RFP/Proposal、消息约定）
├── openapi.yaml        # API 描述（可脱敏 server URL）
├── docs/
│   ├── agent-self-onboarding.md
│   ├── api-reference.md
│   └── rfp-proposal.md
├── examples/
│   ├── capabilities_query.py
│   ├── register_and_rfp.py
│   └── ...
├── sdk/                # 可选
│   └── python/
└── LICENSE             # MIT / Apache 2.0
```

---

## 四、与官方托管平台的关系

- 公开仓库描述的是 **协议与对接方式**，任何人可据此实现客户端或自建兼容服务端。
- **官方托管平台**（如部署在你购买的香港服务器上的服务）提供稳定、可用的生产环境；用户可选择「对接官方平台」或「自建兼容实现」。
- 盈利模式建议：托管服务费、增值功能、企业支持等，而非依赖「不公开协议」锁定用户。

---

## 五、本仓库（当前工程）的对应关系

- 本仓库若为 **私有**：可保留全部代码与本文档，按上述划分在需要时抽离出「公开部分」到新仓库。
- 本仓库若计划 **公开**：建议仅提交「一、建议放入公开仓库」中列出的内容，并将「二、建议保留在私有仓库」中的代码移至私有仓库或从本仓库中移除后再公开。

本文档可随开源策略调整而更新。
